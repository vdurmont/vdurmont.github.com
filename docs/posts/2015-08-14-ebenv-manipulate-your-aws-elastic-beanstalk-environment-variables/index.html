<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Vincent Durmont</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="/assets/css/vdurmont.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/assets/css/prism-hopscotch.css"
    />
  </head>
  <body>
    <div class="page">
      <h1 class="title"><a href="/">Vincent Durmont</a></h1>
      
<p><a href="/">&laquo; Back</a></p>

<p class="blog-date">August 14, 2015</p>
<h1 class="blog-title">ebenv â€” Manipulate your AWS ElasticBeanstalk environment variables</h1>
<p>Recently, I used AWS ElasticBeanstalk a lot to deploy a few applications and it is always a pain to configure all the environment variables I need to run my applications.</p>
<p>To solve this problem, I published a small application that enables you to manipulate your environment directly from your configuration files: <strong><a href="https://github.com/vdurmont/ebenv">ebenv</a></strong>.</p>
<!--more-->
<p>On one of my most recent projects, here is the type of configuration file I use:</p>
<pre class="language-txt"><code class="language-txt">myproject.aws.access_key=AAAAAAAAAAAAAAAAAAAA<br>myproject.aws.secret_key=AAAAAAAAAAAAAAAAAAAA<br><br>myproject.db.password=AAAAAAAAAAAAAAAAAAAA<br>myproject.db.show_sql=false<br>myproject.db.type=MYSQL<br>myproject.db.url=jdbc:mysql://localhost:3306/myproject<br>myproject.db.username=root<br><br>myproject.files.bucket=/tmp/myprojectfiles<br>myproject.files.type=LOCAL<br><br>myproject.github.client_id=AAAAAAAAAAAAAAAAAAAA<br>myproject.github.client_secret=AAAAAAAAAAAAAAAAAAAA<br><br>myproject.mandrill.enabled=true<br>myproject.mandrill.api_key=AAAAAAAAAAAAAAAAAAAA<br><br>myproject.url.api=http://localhost:9997<br>myproject.url.static=http://localhost:9998<br>myproject.url.website=http://localhost:9999<br><br># 30 minutes<br>myproject.worker.user.delay=1800000</code></pre>
<p>Everytime I set up a new environment I have to use the web interface to add the variables one by one. That's a lot of copy/paste. Probably a job for a robot ;)</p>
<p>The <a href="http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3.html">ElasticBeanstalk client</a> enables us to define the environment variables with a command:</p>
<pre class="language-bash"><code class="language-bash">eb setenv <span class="token assign-left variable">keyA</span><span class="token operator">=</span>valA <span class="token assign-left variable">keyB</span><span class="token operator">=</span>valB <span class="token assign-left variable">keyC</span><span class="token operator">=</span>valC</code></pre>
<p>It is still too long to write this command line and that is why I created <strong><a href="https://github.com/vdurmont/ebenv">ebenv</a></strong>.</p>
<h3>Installation</h3>
<p>Simple one-liner ;)</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> ebenv</code></pre>
<h3>Export AWS config to a file</h3>
<pre class="language-bash"><code class="language-bash">ebenv <span class="token builtin class-name">export</span> myfile.json<br>ebenv <span class="token builtin class-name">export</span> myfile.yml<br>ebenv <span class="token builtin class-name">export</span> myfile.properties<br>ebenv <span class="token builtin class-name">export</span> <span class="token parameter variable">--format</span><span class="token operator">=</span>json myfile</code></pre>
<h3>Write a file to the AWS config</h3>
<pre class="language-bash"><code class="language-bash">ebenv <span class="token function">import</span> myfile.json<br>ebenv <span class="token function">import</span> myfile.yml<br>ebenv <span class="token function">import</span> myfile.properties<br>ebenv <span class="token function">import</span> <span class="token parameter variable">--format</span><span class="token operator">=</span>json myfile</code></pre>
<p>Try it out!</p>
<p><a class="btn btn-primary" href="https://github.com/vdurmont/ebenv">Github repo: vdurmont/ebenv</a></p>


    </div>
  </body>
</html>
